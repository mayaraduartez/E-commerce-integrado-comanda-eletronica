<%-include('./cabecalho.ejs')%>

<!-- food section -->

<section class="food_section layout_padding">
  <form method="post">
    <div class="container">
      <div class="heading_container heading_center">
        <h2>Meu Pedido</h2>
      </div>
      <input type="hidden" name="mesa" value="<%= mesaSelecionada %>">
      <table id="customers" class="tabela-pedido">
        <tr>
          <th>Item</th>
          <th>Valor</th>
          <th>Quantidade</th>
          <th></th>
        </tr>
        <% Cardapio.forEach(function(cardapio) { %>
        <tr>
          <td class="item-name" name="titulo"><%= cardapio.titulo %></td>
          <input
            type="hidden"
            name="idpedido"
            min="1"
            max="100"
            value="<%= cardapio.id %>"
          />
          <td class="item-value">R$ <%= cardapio.valor %></td>
          <input
            type="hidden"
            name="valorpedido"
            min="1"
            max="100"
            value="<%= cardapio.valor %>"
          />
          <td>
            <input
              type="number"
              value="1"
              name="quantidade"
              min="1"
              max="100"
            />
          </td>
      
          <td>
            <a href="/pedido/remove/<%= cardapio.id %>" class="user_link">
              <img src="images/remover.png" class="lixeira" alt="delete" />
            </a>
          </td>
        </tr>
        <% }) %>
      </table>
      <div id="mensagemDiv" class="col-12 text-center" style="display: none;">
        <h2 class="empty-message">Seu pedido está sendo preparado. Por favor, aguarde. E bom aproveito!</h2>
      </div>
    </div>

    <div class="btn-box">
      <input
        type="submit"
        id="btnConfirmar"
        class="btn btn-success btn-confirmar"
        href=""
        value="Confirmar"
      />
    </div>
  </form>
</section>
<script
  src="https://kit.fontawesome.com/your-font-awesome-kit.js"
  crossorigin="anonymous"
></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $("form").submit(function(event) {
      event.preventDefault();

      var $form = $(this);
      var $tabelaPedido = $form.find(".tabela-pedido");
      var $mensagemDiv = $("#mensagemDiv");
      var $btnConfirmar = $form.find(".btn-confirmar");

      $.post($form.attr("action"), $form.serialize(), function(response) {
        $tabelaPedido.hide(); // Oculta a tabela
        $btnConfirmar.hide(); // Oculta o botão de confirmação
        $mensagemDiv.show(); // Exibe a div da mensagem
      });
    });
  });
</script>



  
<!-- end food section -->

<%-include('./rodape.ejs')%>